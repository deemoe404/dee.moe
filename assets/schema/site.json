{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://nanosite.schema/site.schema.json",
  "title": "NanoSite Site Configuration",
  "description": "Site configuration schema for NanoSite.",
  "since": "v2.0.0",
  "type": "object",
  "additionalProperties": true,
  "properties": {
    "siteTitle": {
      "$ref": "#/$defs/localizedString",
      "description": "Localized site title."
    },
    "siteSubtitle": {
      "$ref": "#/$defs/localizedString",
      "description": "Localized site subtitle."
    },
    "siteDescription": {
      "$ref": "#/$defs/localizedString",
      "description": "Localized site description used for SEO."
    },
    "siteKeywords": {
      "$ref": "#/$defs/localizedString",
      "description": "Localized SEO keywords (comma-separated)."
    },
    "resourceURL": {
      "type": "string",
      "description": "Base URL prefix for static resources.",
      "format": "uri"
    },
    "contentRoot": {
      "type": "string",
      "description": "Relative folder that contains site content (index.yaml, tabs.yaml, markdown posts). Defaults to 'wwwroot'.",
      "default": "wwwroot",
      "examples": [
        "wwwroot",
        "content",
        "docs"
      ]
    },
    "avatar": {
      "type": "string",
      "description": "Avatar image path or URL."
    },
    "profileLinks": {
      "type": "array",
      "description": "List of profile links shown in header or footer.",
      "items": {
        "$ref": "#/$defs/link"
      }
    },
    "links": {
      "oneOf": [
        {
          "type": "array",
          "description": "Navigation links as an array.",
          "items": {
            "$ref": "#/$defs/link"
          }
        },
        {
          "type": "object",
          "description": "Navigation links as a map of label to URL.",
          "additionalProperties": {
            "type": "string"
          }
        }
      ]
    },
    "contentOutdatedDays": {
      "type": "integer",
      "minimum": 0,
      "description": "Days after which content is considered outdated."
    },
    "themeMode": {
      "type": "string",
      "description": "Theme mode selection.",
      "enum": [
        "dark",
        "light",
        "auto",
        "user"
      ]
    },
    "themePack": {
      "type": "string",
      "description": "Theme pack identifier to load."
    },
    "themeOverride": {
      "type": "boolean",
      "description": "Allow theme override via UI or config."
    },
    "cardCoverFallback": {
      "type": "boolean",
      "description": "Use card cover image as fallback when missing."
    },
    "repo": {
      "type": "object",
      "description": "Repository info used to construct helper URLs (e.g., report issue).",
      "properties": {
        "owner": {
          "type": "string",
          "description": "Repository owner or organization (e.g., octocat)."
        },
        "name": {
          "type": "string",
          "description": "Repository name (e.g., hello-world)."
        },
        "branch": {
          "type": "string",
          "description": "Default branch name (e.g., main or gh-pages)."
        }
      },
      "additionalProperties": true
    },
    "errorOverlay": {
      "type": "boolean",
      "description": "Show error overlay in UI when enabled."
    },
    "pageSize": {
      "type": "integer",
      "minimum": 1,
      "description": "Number of items per page for listings."
    },
    "showAllPosts": {
      "type": "boolean",
      "description": "Whether to show the All Posts tab and index (default true)."
    },
    "enableAllPosts": {
      "type": "boolean",
      "description": "Alias of showAllPosts (true to enable)."
    },
    "disableAllPosts": {
      "type": "boolean",
      "description": "Inverse of showAllPosts (true to hide)."
    },
    "landingTab": {
      "type": "string",
      "description": "Slug or title of a tabs.yaml-defined page to use as the landing tab (applies regardless of showAllPosts)."
    },
    "postsPerPage": {
      "type": "integer",
      "minimum": 1,
      "description": "Number of posts per page."
    },
    "defaultLanguage": {
      "type": "string",
      "description": "Default language code (e.g., en, zh-CN)."
    },
    "assetWarnings": {
      "type": "object",
      "description": "Settings for asset-related warnings.",
      "properties": {
        "largeImage": {
          "type": "object",
          "description": "Warn when image files exceed size threshold.",
          "properties": {
            "enabled": {
              "type": "boolean",
              "description": "Enable large image warning."
            },
            "thresholdKB": {
              "type": "integer",
              "minimum": 1,
              "description": "File size threshold in kilobytes."
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": true
    }
  },
  "$defs": {
    "link": {
      "type": "object",
      "properties": {
        "label": {
          "type": "string",
          "description": "Link label to display."
        },
        "href": {
          "type": "string",
          "description": "Destination URL."
        }
      },
      "required": [
        "label",
        "href"
      ],
      "additionalProperties": false
    },
    "localizedString": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "type": "object",
          "properties": {
            "default": {
              "type": "string",
              "description": "Default value when locale is not specified."
            }
          },
          "additionalProperties": {
            "type": "string"
          }
        }
      ]
    }
  }
}
